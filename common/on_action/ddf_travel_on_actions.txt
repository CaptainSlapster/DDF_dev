
on_travel_plan_movement = {
    on_actions ={
	 	ddf_travel_plan_trigger
	}
}

ddf_travel_plan_trigger = {
	trigger = {
		is_playable_character = yes
		is_adult = yes 
	}
    on_actions = {
        ddf_travel_danger_events_on_action
        delay = {days = 2}       
    }
}

ddf_travel_danger_events_on_action = {
	trigger = {
		is_migrating = no # No Danger events while migrating
		has_game_rule = ddf_events_on
	}
	effect = {
		debug_log = "The travel danger on action is firing!!!"
	}
	random_events = {
		chance_of_no_event = {
			value = {
				add = 100
				if = {
					limit = {
						exists = root.current_travel_plan
						exists = root.location
					}
					subtract = root.current_travel_plan.current_danger_value
					add = root.current_travel_plan.travel_safety
				}
			}
			max = {
				value = 100
				subtract = define:NTravel|TRAVEL_DANGER_MINIMUM
			}
		}
		#10 = 0
		20000 = ddf_travel_danger_events.1000 # Big rock hurts
	}    
}